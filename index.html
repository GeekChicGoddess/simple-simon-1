<!--
-- PLAN PROJECT --

Planning out the project (for this morning)...

   a) write out all the rules for Simple Simon in your own words with clear and simple language
       - make sure you can clearly describe the game
       - make sure you understand all the steps of playing the game
       - make sure you understand how to pass a round and how to lose the game

       -input turns on game
       -input can turn on game by pressing any button
       -game starts by generating random color
       -the random color lights up on button
       -input clicks on button that lit up
       -game repeats color and adds another one to computerSequence
       -input repeats the computerSequence
       -if input replicates the correct computerSequence
            -game replicates same computerSequence and adds another random color
            -repeat rounds until input gets wrong
            -game makes sound to alert game over and buttons all blink
       -if input ges computerSequence wrong
            -game over
            -game starts over if input presses any button



   b) draft the logical steps of your game using pseudo-code (BE SPECIFIC - these steps will be the beginning of your comments)
       - consider any global variables you will need to define
       - consider all functions you will need to execute processes to run the game
       - consider all events you will need to interact with the game


       - each square needs to be able to flash when with clicked on or computerSequence is running
       - computerSequence needs to generated with random number 1-4
       - each number connects to different color button
       - computerSequence only generates one output
       - another number will generate if input gets previous computerSequence correct
       - computerSequence will have to remain the same after random numbers generated
       - start by having full random computerSequence in array and only allowing to play one at a time?
       - break from computerSequence if input gets wrong or reaches the end of computerSequence.


   c) consider what extra features you want to eventually add

      - on off button
      - reset button
      - a timer that ends game for input if they take too long
      - input gets score based off number of rounds


   d) plan out the design or theme you eventually will create

      - container with 4 divs to hold 4 boxes
      - make container have relative position
      - make boxes have absolute positioning
      - place each button at corner of container
      - resize boxes to take up most of the container
      - make box initial color dim
      - boxes light up during game


-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple Mario</title>
    <style>
        body {
            background-color: grey;
        }

        h1 {
            text-align: center;
        }

        #container {
            height: 500px;
            width: 500px;
            background-color: grey;
            background-size: 500px;
            border: 5px solid black;
            position: relative;
            margin: auto;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .square {
            height: 240px;
            width: 240px;
            margin: 3px;
            position: absolute;
            opacity: 0.3;
        }

        #red1 {
            top: 0px;
            left: 0px;
        }

        #blue2 {
            top: 0px;
            right: 0px;
        }

        #green3 {
            bottom: 0px;
            right: 0px;
        }

        #yellow4 {
            bottom: 0px;
            left: 0px;
        }

        #play-reset {
            height: auto;
            width: 120px;
            border: 1px solid black;
            text-align: center;
            background-color: black;
            color: white;
            top: 48%;
            left: 41%;
            font-size: 18px;
            opacity: 0.9;
            margin: auto;
        }

        .red {
            background-color: darkred;
        }

        .mario {
            background: url('mario.jpg');
            background-size: 240px;
            border: 3px solid #ff0900;
            background-color: white;
            top: 0px;
            left: 0px;
        }

        .dk {
            background: url('donkeykong.png');
            background-size: 240px;
            background-color: white;
            border: 3px solid saddlebrown;
            position: absolute;
            top: 0px;
            right: 0px;
        }

        .luigi {
            background: url('luigi.png');
            background-size: 240px;
            border: 3px solid #0aff02;
            background-color: white;
            bottom: 0px;
            right: 0px;
        }

        .wario {
            background: url('wario.jpg');
            background-size: 240px;
            border: 3px solid #ffe100;
            background-color: white;
            bottom: 0px;
            left: 0px;
        }


    </style>
</head>
<body>

<h1>Simple Mario</h1>

<div id="container">
    <div id="red1" class="square"></div>
    <div id="blue2" class="square"></div>
    <div id="green3" class="square"></div>
    <div id="yellow4" class="square"></div>
</div>


<div id="play-reset">PLAY/RESET</div>


<script src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
<script>


    var computerArray = [];
    var userArray = [];
    var userSelections = false;
    var level = 0;


    function addToSequence() {
        var newRandomNumber = Math.floor((Math.random() * 4) + 1);
        computerArray.push(newRandomNumber);
        level += 1;
        console.log("level:" + level);
        console.log("Generating new random number " + newRandomNumber);
        console.log("new sequence: " + computerArray);
        InputSequence();
    }

    function playComputerArray(j, delay) {
        setTimeout(function () {
            lightUpSquare(computerArray[j]);
        }, delay);
    }

    function InputSequence() {
        userSelections = false;
        for (var i = 0; i < computerArray.length; i++) {
            playComputerArray(i, (1200 + (i * 1200)));
            if (i === computerArray.length - 1) {
                setTimeout(function () {
                    userSelections = true;
                }, 1200 + (i * 1200))
            }
        }
        userArray = [];
    }


    function playerInput(squareColor) {
        if (userSelections) {
            userArray.push(squareColor);
            if (userArray.length == computerArray.length) {
                userSelections = false;
                var correct = true;
                for (var k = 0; k < userArray.length; k++) {
                    if (userArray[k] !== computerArray[k]) {
                        correct = false;
                    }
                }
                if (correct) {
                    console.log("great job picking those colors");
                    weHaveAWinner();
                } else {
                    console.log('you are wrong');
                    incorrect();
                }
            }
        }
    }


    $('#red1').click(function () {
        if (userSelections) {
            lightUpSquare(1);
            playerInput(1);
        }
    });
    $('#blue2').click(function () {
        if (userSelections) {
            lightUpSquare(2);
            playerInput(2);
        }
    });
    $('#green3').click(function () {
        if (userSelections) {
            lightUpSquare(3);
            playerInput(3);
        }
    });
    $('#yellow4').click(function () {
        if (userSelections) {
            lightUpSquare(4);
            playerInput(4);
        }
    });


    function lightUpSquare(squareColor) {
        switch (squareColor) {
            case 1:
                $('#red1').fadeTo('', 0.9).fadeTo('', 0.3);
                var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_mario01.wav');
                sound.play();
                break;
            case 2:
                $('#blue2').fadeTo('', 0.9).fadeTo('', 0.3);
                var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_dk04.wav');
                sound.play();
                break;
            case 3:
                $('#green3').fadeTo('', 0.9).fadeTo('', 0.3);
                var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_luigi03.wav');
                sound.play();
                break;
            case 4:
                $('#yellow4').fadeTo('', 0.9).fadeTo('', 0.3);
                var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_wario05.wav');
                sound.play();
                break;
        }
    }


    //    $('document').ready(function () {
    //        var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_racestart.wav');
    //        sound.play();
    //        });

    function playStartSong() {
        var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_racestart.wav');
        sound.play();
    }

    function winner() {
        var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_firstplace.wav');
        sound.play();
        var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_mario_a11.wav');
        sound.play();
        $('#red1').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#red1').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#red1').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#red1').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#red1').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#blue2').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#blue2').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#blue2').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#blue2').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#blue2').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#green3').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#green3').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#green3').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#green3').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#green3').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#yellow4').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#yellow4').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#yellow4').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#yellow4').fadeTo('', 0.9).fadeTo('', 0.3);
        $('#yellow4').fadeTo('', 0.9).fadeTo('', 0.3);
    }


    function playOrReset() {
        setTimeout(function () {
            level = 0;
            computerArray = [];
            console.log("reset sequence");
            addToSequence();
        }, 5500)
    }

    $('#play-reset').click(function () {
        playStartSong();
        playOrReset();
        $('#red1').addClass('mario');
        $('#blue2').addClass('dk');
        $('#green3').addClass('luigi');
        $('#yellow4').addClass('wario');

    });

    function incorrect() {
        var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_loser.wav');
        sound.play();
        var sound = new Audio('http://themushroomkingdom.net/sounds/wav/mk64/mk64_bowser03.wav');
        sound.play();
        $('body').addClass('red');
        $('#red1').removeClass('mario');
        $('#blue2').removeClass('dk');
        $('#green3').removeClass('luigi');
        $('#yellow4').removeClass('wario');
        $('#container').css("background-image", "url(bowser.png)");
    }

    function weHaveAWinner() {
        setTimeout(function () {
            if (level === 5) {
                winner();
            } else {
                addToSequence();
            }
        });
    }


</script>
</body>
</html>
